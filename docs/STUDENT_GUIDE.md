# Git Workflow

## Схема роботи

```text
┌─────────────────────────────────────────────────────────────────┐
│                    ВИКЛАДАЧ (main repo)                          │
│                  github.com/victorchei/php-labs                  │
│                                                                  │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐      ┌──────────┐   │
│   │  shared/ │  │  demo/   │  │   v1/    │ ...  │   v15/   │   │
│   └──────────┘  └──────────┘  └──────────┘      └──────────┘   │
└─────────────────────────┬───────────────────────────────────────┘
                          │
          ┌───────────────┼───────────────┐
          │ fork          │ fork          │ fork
          ▼               ▼               ▼
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│   Студент 1     │ │   Студент 2     │ │   Студент N     │
│   (працює v1)   │ │   (працює v2)   │ │   (працює vN)   │
└─────────────────┘ └─────────────────┘ └─────────────────┘
```

---

## Для студентів

### Початкове налаштування (один раз)

1. Відкрийте: <https://github.com/victorchei/php-labs>
2. Натисніть **Fork** (правий верхній кут)
3. Clone свій форк:

```bash
git clone https://github.com/ВАШ_ЛОГІН/php-labs.git
cd php-labs
git remote add upstream https://github.com/victorchei/php-labs.git
```

4. Запустіть сервер:

```bash
php -S localhost:8000
```

### Робочий процес

```text
1. FORK & CLONE (один раз)
   GitHub: Fork → Clone → Add upstream

2. РОБОТА НАД ЗАВДАННЯМ
   ┌────────────────────────────────────────┐
   │  cd lr1/variants/vN/                   │
   │  # редагувати tasks/task3.php          │
   │  php run_tests.php                     │
   │  git add . && git commit && git push   │
   └────────────────────────────────────────┘

3. СИНХРОНІЗАЦІЯ (коли викладач оновив репо)
   ┌────────────────────────────────────────┐
   │  git fetch upstream                    │
   │  git merge upstream/main               │
   │  git push                              │
   └────────────────────────────────────────┘

4. ЗДАЧА: Push + повідомити викладача
```

### Перевірка прогресу

Відкрийте у браузері: `http://localhost:8000/lr1/variants/vN/task3.php`

| Статус   | Значення           |
| -------- | ------------------ |
| ❌ 0%    | Не реалізовано     |
| ⚠️ 50%   | Частково виконано  |
| ✅ 100%  | Повністю виконано  |

### Синхронізація з upstream

```text
ВИКЛАДАЧ                            СТУДЕНТ
    │                                   │
    │  1. Push fix/update               │
    ▼                                   │
┌────────┐                              │
│ main   │ ◄── upstream                 │
└────────┘                              │
    │         2. git fetch upstream     │
    │         3. git merge upstream/main│
    │                                   ▼
    └─────────────────────────────►┌────────┐
                                   │ fork   │
                                   └────────┘
```

```bash
git fetch upstream
git checkout main
git merge upstream/main
git push
```

### Уникнення конфліктів

- Працюйте **ТІЛЬКИ** в `variants/vN/tasks/`
- Не змінюйте `shared/`, `demo/`, інші варіанти

---

## Для викладача

### Що оновлюється автоматично

| Що оновлюється              | Студент отримає |
| --------------------------- | --------------- |
| `shared/`                   | ✅ Так          |
| `demo/`                     | ✅ Так          |
| `docs/`                     | ✅ Так          |
| `lr2/`, `lr3/` (нові лаби)  | ✅ Так          |
| Виправлення тестів          | ✅ Так          |

### Правила для уникнення конфліктів

- Викладач НЕ змінює `variants/vN/tasks/`
- Студенти працюють ТІЛЬКИ в `variants/vN/tasks/`
- Конфліктів не буде

### Перевірка робіт

1. Студент надсилає посилання на свій форк
2. Викладач клонує/переглядає форк
3. Перевіряє тести: `cd lr1/variants/vN && php run_tests.php`

---

## Типові помилки

| Проблема                  | Рішення                                                                         |
| ------------------------- | ------------------------------------------------------------------------------- |
| `permission denied`       | Перевірте SSH ключі або використовуйте HTTPS                                    |
| Конфлікт при merge        | Працюйте тільки у `variants/vN/tasks/`                                          |
| Тести не проходять        | Перевірте синтаксис: `php -l file.php`                                          |
| Сервер не запускається    | Перевірте PHP: `php -v`                                                         |
| `upstream` не знайдено    | `git remote add upstream https://github.com/victorchei/php-labs.git`            |

---

## Корисні посилання

- [Запуск проєкту](running-project.md)
- [Робота з Git](git-guide.md)
- [Критерії прийняття](acceptance-criteria.md)
